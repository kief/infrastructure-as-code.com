
{% if page.layout == "pattern" or page.layout == "pattern-group" %}

<div class="sidebar-module">
  <h4>Pattern List</h4>

{% assign pattern_categories = site.patterns | sort: 'order' | group_by: 'category' %}
{% for category in pattern_categories %}

  {% assign pattern_items = category.items | sort: 'order' %}

  {% for item in pattern_items %}
    {% if item.section == true %}
      </ul>
      <h4><a href="{{ item.url }}">{{ item.title }}</a></h4>
      <ul>
    {% endif %}
  {% endfor %}

  {% for item in pattern_items %}
    {% if item.layout == "pattern" %}
      <li>
        <a href="{{ item.url }}">{{ item.title }}</a>
      </li>
    {% endif %}
  {% endfor %}

{% endfor %}

</div>
{% endif %}
